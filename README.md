# About

This library provides programmatic access to the Pivotal API using .net.  Eventually, all the Pivotal APIs will be implemented, but for now it is the most commonly used items -- those methods involved in managing the stories and tasks.

NOTE: This started as an enhancement to a project on google code, but it ended up being an overhaul.  However, there are still some remnants of that original code, so credit needs to be given to the author: http://code.google.com/p/pivotal-tracker-api/ 


# To Do

* Write tests
* More CRUD operations
  * Project: Update, Delete(?)
  * Membership: Update, Delete, Add
  * Iterations: (not implemented at all)
  * Stories: Pagination, Deliver, Move, External Integrations, Attachments


# Common Terms

The term "fetch" is used whenever an operation is querying Pivotal.  I wanted to make sure it is obvious when you are using data that you is associated with an object and when you are actively submitting a request to the API so you can control how much you hit the API.

The term "load" is used whenever an operation is using fetch to get data but then setting the value for a property (effectively using a cache of the returned results).  I recommend using this Load + Property method over calling Fetch every time.

# Serialization

Depending on your needs, you may need to modify the serialization method.  It currently uses two steps:
1. Use list of ignored properties to remove nodes from what is submitted to Pivotal (for example, don't submit things like created_at, since that is generated by Pivotal)
2. Remove attributes that are null.  The XmlSerializer will add an xsi:nil attribute to the nodes, so the serialization process removes elements that have this.  The benefit is that you are only updating items that have values, but the downside is that it is difficult to clear values.


# Usage

## ApiToken / User Construction

For all operations, you need a user that has an ApiToken. You can retrieve the ApiToken using the PivotalUser class:

    PivotalUser user = PivotalUser.GetUserFromCredentials(login, password);

or you can just construct the user if you know the token:

    PivotalUser user = new PivotalUser(apiToken);

All operations require passing in a user so the token can be used to communicate with Pivotal.


Most CRUD operations have both a static and an instance operation so they can be invoked like this:

    IList<PivotalProject> projects = PivotalProject.FetchProjects(user);

or this:

    IList<PivotalProject> projects = user.FetchProjects();

Getting stories is similiar:

    IList<PivotalStory> stories = Story.FetchStories(user, project.Id);

or:

    IList<PivotalStory> stories = project.FetchStories(user);
    
Lazy loading is not used unless you specifically request it.  For example, to get a project, you can use the method above, but the stories are not loaded.  If you want to pre-load the stories, you would use the version of the method that has a flag to load the stories:

    PivotalProject project = PivotalProject.FetchProject(user, projectId, true);